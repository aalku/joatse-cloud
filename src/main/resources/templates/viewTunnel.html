<!DOCTYPE HTML>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head> 
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
	<script type="text/javascript" th:inline="javascript">
		let uuid = /*[[${uuid}]]*/ null;
		window.history.replaceState(null, '', '/viewTunnel?uuid=' + uuid);
	</script>
	<style>
		html {font-size: 14px};
		@media (max-width: 767px) { 
		  html {
		    /* default is 1rem or 16px */ 
		    font-size: 25px; 
		  } 
		}
	</style>
</head>
<body>
	<div class="container">
		<h1>JOATSE</h1>
		<h2>Tunnel has been confirmed</h2>
		<br/>
		<h3>Connection details</h3>
		<form th:object="${tunnel}">
			<div class="form-group">
				<label for="requesterAddress">Connection requester address</label>
				<input class="form-control" type="text" id="requesterAddress" th:value="*{requesterAddress}"
					disabled="disabled" />
			</div>
			<div class="form-group">
				<label for="creationTime">Request creation time</label>
				<input class="form-control" type="text" id="creationTime" th:value="*{creationTime}"
					disabled="disabled" />
			</div>
			<div class="form-group" th:if="*{targetHostId != null && !targetHostId.isEmpty()}">
				<label for="targetHostId">Connection target host description</label>
				<input class="form-control" type="text" id="targetHostId" th:value="*{targetHostId}"
					disabled="disabled" />
			</div>
			<div class="form-group">
				<label for="targetPort">Connection target port</label>
				<input class="form-control" type="text" id="targetPort" th:value="*{targetPort}"
					disabled="disabled" />
			</div>
			<div class="form-group" th:if="*{targetPortDescription != null && !targetPortDescription.isEmpty()}">
				<label for="targetPortDescription">Connection target port description</label>
				<input class="form-control" type="text" id="targetPortDescription" th:value="*{targetPortDescription}"
					disabled="disabled" />
			</div>
			<div class="form-group">
				<label for="allowedAddress">Allowed IP address</label>
				<input class="form-control" type="text" id="allowedAddress" th:value="${allowedAddress}"
					disabled="disabled" />
			</div>
			<div class="form-group">
				<label for="cloudListenPort">Listen port</label>
				<input class="form-control" type="text" id="cloudListenPort" th:value="*{cloudListenPort}"
					disabled="disabled" />
			</div>
		</form>
		<h3>TCP Socket listening</h3>
		<p th:text="|You can connect to ${cloudPublicHostname}:${tunnel.cloudListenPort} and it will be tunneled to ${tunnel.targetPort} port in the target.|"></p>
	</div>
</body>
</html>